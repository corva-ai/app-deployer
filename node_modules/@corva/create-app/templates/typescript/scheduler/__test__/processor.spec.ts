import { Processor } from '../lib/processor';
import type { HandlerContext, ScheduledLambdaEvent } from '@corva/node-sdk';

test('process event', async () => {
  const fakeLogger = console as unknown as HandlerContext['logger'];
  const fakeApiClient = {} as unknown as HandlerContext['api'];

  const event = {
    company: 1,
    asset_id: 1234,
    schedule: 206977482,
    interval: 300,
    schedule_start: 157829100000,
    schedule_end: 157829400000,
  } as unknown as ScheduledLambdaEvent<any>;

  const processor = new Processor(fakeApiClient, fakeLogger);

  await processor.process(event);
});
