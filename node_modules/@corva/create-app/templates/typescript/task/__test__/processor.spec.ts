import { HandlerContext, Task, TaskState } from '@corva/node-sdk';
import { Processor } from '../src/processor';

test('process event', async () => {
  const fakeLogger = console as unknown as HandlerContext['logger'];
  const fakeApiClient = {} as unknown as HandlerContext['api'];

  const event: Task<{
    foo: string;
  }> = {
    id: 'id',
    state: TaskState.Running,
    fail_reason: null,
    asset_id: 123,
    company_id: 1234,
    properties: {
      foo: 'bar',
    },
    document_bucket: 'test',
    payload: null,
    app_id: 42,
  };

  const processor = new Processor(fakeApiClient, fakeLogger);

  await processor.process(event);
});
