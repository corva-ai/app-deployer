const { APP_TYPES } = require("../constants/cli");

const resolveAppRuntime = (opts) => {
  if (opts.appType === APP_TYPES.UI) {
    return {
      language: opts.useTypescript ? "typescript" : "javascript",
      packageManager: opts.packageManager,
      version: process.version.replace(/^v/, ""),
    }
  }

  if (opts.runtime.startsWith('node')) {
    const version = /nodejs(\d{2})\.x/.exec(opts.runtime)[1];

    return {
      language: opts.useTypescript ? "typescript" : "javascript",
      packageManager: opts.packageManager,
      version
    }
  }

  return {
    language: "python",
    packageManager: 'pip',
    version: '3.8'
  }
};

module.exports = { resolveAppRuntime };
