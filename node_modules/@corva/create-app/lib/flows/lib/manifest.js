const { APP_TYPES, APP_RUNTIMES } = require('../../constants/cli');

const NODE_RUNTIMES = [APP_RUNTIMES.NODE12, APP_RUNTIMES.NODE14, APP_RUNTIMES.NODE16];

class Manifest {
  constructor(manifest) {
    this.manifest = manifest;
  }

  get runtime() {
    return this.manifest.settings.runtime;
  }

  get type() {
    return this.manifest.application.type
  }

  get name() {
    return this.manifest.application.name
  }

  get description() {
    return this.manifest.application.description
  }

  isNode() {
    return NODE_RUNTIMES.includes(this.manifest.settings.runtime);
  }

  isUi() {
    return this.manifest.application.type === APP_TYPES.UI;
  }

  isJs() {
    return this.isUi() || this.isNode();
  }

  isPython() {
    return this.manifest.settings.runtime === APP_RUNTIMES.PYTHON3;
  }

  isScheduler() {
    return this.manifest.application.type === APP_TYPES.SCHEDULER;
  }
}

module.exports = { Manifest };
