const { createZipArchive } = require('../lib/create-zip-archive');
const debug = require('debug')('cca:flow:zip:archive');

const CREATE_ARCHIVE_STEP = {
  message: 'Creating archive...',
  fn: async ({ itemsToZip, zipFileName, dirName }) => {
    debug(`Zipping %d items to %s`, itemsToZip.length, zipFileName);

    const bytes = await createZipArchive(dirName, zipFileName, itemsToZip);

    debug(`Created %s with %d items (%d bytes)`, zipFileName, itemsToZip.length, bytes);
  },
};

module.exports = { CREATE_ARCHIVE_STEP };
