import debugFn from 'debug';
import { createZipArchive } from '../lib/create-zip-archive.js';

const debug = debugFn('cca:flow:zip:archive');

export const CREATE_ARCHIVE_STEP = {
  message: 'Creating archive...',
  fn: async ({ itemsToZip, zipFileName, dirName }) => {
    debug(`Zipping %d items to %s`, itemsToZip.length, zipFileName);

    const bytes = await createZipArchive(dirName, zipFileName, itemsToZip);

    debug(`Created %s with %d items (%d bytes)`, zipFileName, itemsToZip.length, bytes);
  },
};
