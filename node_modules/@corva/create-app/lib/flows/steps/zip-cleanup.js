import { promises as fs } from 'node:fs';
import { resolve } from 'node:path';

import debugFn from 'debug';

const debug = debugFn('cca:flow:zip:cleanup');

export const CLEANUP_STEP = {
  message: 'Removing temporary files...',
  fn: async ({ itemsToRemove, dirName }) => {
    for (const item of itemsToRemove) {
      debug('Removing %s', item);

      await fs.unlink(resolve(dirName, item));
    }
  },
};
