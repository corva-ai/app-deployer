const { promises: fs } = require('fs');
const { resolve } = require('path');

const debug = require('debug')('cca:flow:zip:cleanup');

const CLEANUP_STEP = {
  message: 'Removing temporary files...',
  fn: async ({ itemsToRemove, dirName }) => {
    for (const item of itemsToRemove) {
      debug('Removing %s', item);

      await fs.unlink(resolve(dirName, item));
    }
  },
};

module.exports = { CLEANUP_STEP };
