const { saveJson } = require('../lib/json');

const debug = require('debug')('cca:flow:zip:prepare');

const PREPARE_FILES_BEFORE_ZIP_STEP = {
  message: 'Preparing...',
  fn: async ({ itemsToSave, dirName }) => {
    for (const item of itemsToSave) {
      debug(`Updating %s`, item.name);
      await saveJson(dirName, item.name, item.content);

      if (item.message) {
        process.stdout.write(item.message);
      }
    }
  },
};

module.exports = {
  PREPARE_FILES_BEFORE_ZIP_STEP,
};
